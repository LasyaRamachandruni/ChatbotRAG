<!-- MLK Library Employee AI Chatbot - Enhanced with Analytics Data -->
<!-- Copy this entire code block and paste it into Google Sites HTML embed -->

<div id="mlk-employee-chatbot-widget"></div>

<style>
/* Enhanced Employee Chatbot Styles */
#mlk-employee-chatbot-widget {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 10000;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

.mlk-employee-chatbot-button {
    position: relative;
    width: 75px;
    height: 75px;
    border-radius: 50%;
    background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 8px 32px rgba(30, 60, 114, 0.4);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: 3px solid rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(10px);
}

.mlk-employee-chatbot-button:hover {
    transform: scale(1.1) translateY(-2px);
    box-shadow: 0 12px 40px rgba(30, 60, 114, 0.5);
}

.mlk-employee-chatbot-button::before {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
    opacity: 0.7;
    animation: mlk-employee-pulse 2s infinite;
}

@keyframes mlk-employee-pulse {
    0% { transform: scale(1); opacity: 0.7; }
    50% { transform: scale(1.2); opacity: 0.3; }
    100% { transform: scale(1); opacity: 0.7; }
}

.mlk-employee-chatbot-avatar {
    width: 45px;
    height: 45px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid rgba(255, 255, 255, 0.8);
    position: relative;
    z-index: 1;
}

.mlk-employee-chat-container {
    position: fixed;
    bottom: 100px;
    right: 20px;
    width: 380px;
    height: 550px;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 20px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    transform: translateY(20px) scale(0.95);
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.mlk-employee-chat-container.open {
    transform: translateY(0) scale(1);
    opacity: 1;
    visibility: visible;
}

.mlk-employee-chat-header {
    background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
    color: white;
    padding: 20px;
    border-radius: 20px 20px 0 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.mlk-employee-chat-header h3 {
    margin: 0;
    font-size: 16px;
    font-weight: 600;
}

.mlk-employee-chat-header .subtitle {
    font-size: 12px;
    opacity: 0.9;
    margin-top: 2px;
}

.mlk-employee-close-btn {
    background: none;
    border: none;
    color: white;
    font-size: 18px;
    cursor: pointer;
    padding: 5px;
    border-radius: 50%;
    transition: background-color 0.2s;
}

.mlk-employee-close-btn:hover {
    background-color: rgba(255, 255, 255, 0.2);
}

.mlk-employee-chat-messages {
    flex: 1;
    padding: 15px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.mlk-employee-message {
    max-width: 85%;
    padding: 12px 16px;
    border-radius: 18px;
    font-size: 14px;
    line-height: 1.4;
    word-wrap: break-word;
}

.mlk-employee-message.bot {
    background: linear-gradient(135deg, #f0f2f5 0%, #e8eaf0 100%);
    color: #333;
    align-self: flex-start;
    border-bottom-left-radius: 6px;
}

.mlk-employee-message.user {
    background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
    color: white;
    align-self: flex-end;
    border-bottom-right-radius: 6px;
}

.mlk-employee-quick-actions {
    padding: 10px 15px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.mlk-employee-quick-btn {
    background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
    color: white;
    border: none;
    padding: 8px 12px;
    border-radius: 15px;
    font-size: 12px;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
}

.mlk-employee-quick-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(30, 60, 114, 0.3);
}

.mlk-employee-input-area {
    padding: 15px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    display: flex;
    gap: 10px;
    align-items: center;
}

.mlk-employee-input {
    flex: 1;
    border: 1px solid rgba(0, 0, 0, 0.1);
    border-radius: 20px;
    padding: 12px 16px;
    font-size: 14px;
    outline: none;
    transition: border-color 0.2s;
}

.mlk-employee-input:focus {
    border-color: #2a5298;
}

.mlk-employee-send-btn {
    background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
    color: white;
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

.mlk-employee-send-btn:hover {
    transform: scale(1.1);
}

.mlk-employee-typing {
    display: flex;
    align-items: center;
    gap: 5px;
    padding: 12px 16px;
    background: linear-gradient(135deg, #f0f2f5 0%, #e8eaf0 100%);
    border-radius: 18px;
    border-bottom-left-radius: 6px;
    align-self: flex-start;
    max-width: 85%;
}

.mlk-employee-typing-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background-color: #666;
    animation: mlk-employee-typing-animation 1.4s infinite ease-in-out;
}

.mlk-employee-typing-dot:nth-child(2) { animation-delay: 0.2s; }
.mlk-employee-typing-dot:nth-child(3) { animation-delay: 0.4s; }

@keyframes mlk-employee-typing-animation {
    0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
    40% { transform: scale(1); opacity: 1; }
}

/* Mobile Responsive */
@media (max-width: 480px) {
    .mlk-employee-chat-container {
        width: calc(100vw - 40px);
        height: calc(100vh - 140px);
        right: 20px;
        left: 20px;
    }
}
</style>

<script>
class MLKEmployeeChatbot {
    constructor() {
        this.isOpen = false;
        this.isTyping = false;
        this.init();
    }

    init() {
        this.createWidget();
        this.bindEvents();
        this.addWelcomeMessage();
    }

    createWidget() {
        const widget = document.getElementById('mlk-employee-chatbot-widget');
        
        widget.innerHTML = `
            <div class="mlk-employee-chatbot-button" id="mlk-employee-chatbot-button">
                <img src="https://www.sjpl.org/sites/default/files/styles/hero_image/public/2023-09/king-library-entrance-dusk.jpg" 
                     alt="MLK Library" class="mlk-employee-chatbot-avatar">
            </div>
            
            <div class="mlk-employee-chat-container" id="mlk-employee-chat-container">
                <div class="mlk-employee-chat-header">
                    <div>
                        <h3>üèõÔ∏è MLK Library Employee Assistant</h3>
                        <div class="subtitle">Internal Navigation & Staff Directory</div>
                    </div>
                    <button class="mlk-employee-close-btn" id="mlk-employee-close-btn">√ó</button>
                </div>
                
                <div class="mlk-employee-chat-messages" id="mlk-employee-chat-messages"></div>
                
                <div class="mlk-employee-quick-actions">
                    <button class="mlk-employee-quick-btn" onclick="mlkEmployeeBot.quickAction('directory')">üìû Staff Directory</button>
                    <button class="mlk-employee-quick-btn" onclick="mlkEmployeeBot.quickAction('forms')">üìã Forms & Policies</button>
                    <button class="mlk-employee-quick-btn" onclick="mlkEmployeeBot.quickAction('navigation')">üó∫Ô∏è Site Navigation</button>
                    <button class="mlk-employee-quick-btn" onclick="mlkEmployeeBot.quickAction('departments')">üè¢ Departments</button>
                    <button class="mlk-employee-quick-btn" onclick="mlkEmployeeBot.quickAction('hr')">üë• HR Resources</button>
                </div>
                
                <div class="mlk-employee-input-area">
                    <input type="text" class="mlk-employee-input" id="mlk-employee-input" 
                           placeholder="Ask about staff, forms, navigation..." maxlength="500">
                    <button class="mlk-employee-send-btn" id="mlk-employee-send-btn">‚û§</button>
                </div>
            </div>
        `;
    }

    bindEvents() {
        const button = document.getElementById('mlk-employee-chatbot-button');
        const closeBtn = document.getElementById('mlk-employee-close-btn');
        const sendBtn = document.getElementById('mlk-employee-send-btn');
        const input = document.getElementById('mlk-employee-input');

        button.addEventListener('click', () => this.toggleChat());
        closeBtn.addEventListener('click', () => this.closeChat());
        sendBtn.addEventListener('click', () => this.sendMessage());
        
        input.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') this.sendMessage();
        });
    }

    toggleChat() {
        this.isOpen = !this.isOpen;
        const container = document.getElementById('mlk-employee-chat-container');
        container.classList.toggle('open', this.isOpen);
        
        if (this.isOpen) {
            document.getElementById('mlk-employee-input').focus();
        }
    }

    closeChat() {
        this.isOpen = false;
        document.getElementById('mlk-employee-chat-container').classList.remove('open');
    }

    addWelcomeMessage() {
        setTimeout(() => {
            this.addMessage('bot', `üëã Hi there! I'm your MLK Library Employee Assistant! 

I can help you with:
‚Ä¢ üìû Staff directory & contact info
‚Ä¢ üìã Forms and policies navigation  
‚Ä¢ üó∫Ô∏è Finding pages on libscoop
‚Ä¢ üè¢ Department information
‚Ä¢ üë• HR resources & procedures

What can I help you find today?`);
        }, 1000);
    }

    sendMessage() {
        const input = document.getElementById('mlk-employee-input');
        const message = input.value.trim();
        
        if (!message || this.isTyping) return;
        
        this.addMessage('user', message);
        input.value = '';
        
        this.showTyping();
        setTimeout(() => {
            this.hideTyping();
            this.generateResponse(message);
        }, 1500);
    }

    quickAction(action) {
        const actions = {
            'directory': 'Show me the staff directory and contact information',
            'forms': 'Help me navigate forms and policies',
            'navigation': 'Help me find pages on the libscoop website',
            'departments': 'Show me information about library departments',
            'hr': 'Show me HR resources and procedures'
        };
        
        if (actions[action]) {
            this.addMessage('user', actions[action]);
            this.showTyping();
            setTimeout(() => {
                this.hideTyping();
                this.generateResponse(actions[action]);
            }, 1500);
        }
    }

    generateResponse(message) {
        const lowerMessage = message.toLowerCase();
        let response = '';

        // Staff Directory & Contact Information
        if (lowerMessage.includes('directory') || lowerMessage.includes('staff') || lowerMessage.includes('contact')) {
            response = `üìû **Staff Directory & Contacts**

**Most Accessed Directory Pages:**
‚Ä¢ Main Directory: /sjsu.edu/libraryscoop/directory (74 views)
‚Ä¢ Student Assistant Supervisors: /sjsu.edu/libraryscoop/student-employee-info/student-assistant-supervisors

**Key Department Contacts:**
‚Ä¢ **Administration**: /sjsu.edu/libraryscoop/departments/administration
‚Ä¢ **Human Resources**: /sjsu.edu/libraryscoop/departments/operations-administrative-services/human-resources
‚Ä¢ **Research & Scholarship**: /sjsu.edu/libraryscoop/departments/researchandscholarship
‚Ä¢ **Marketing & Communications**: /sjsu.edu/libraryscoop/departments/marcomm

Need a specific person's extension or room number? Just ask! üì±`;

        // Forms & Policies Navigation
        } else if (lowerMessage.includes('form') || lowerMessage.includes('polic') || lowerMessage.includes('procedure')) {
            response = `üìã **Forms & Policies Navigation**

**Top Forms & Policies Page** (297 views):
üîó /sjsu.edu/libraryscoop/forms-policies

**Popular Form Categories:**
‚Ä¢ **HR Forms**: /sjsu.edu/libraryscoop/departments/operations-administrative-services/human-resources
‚Ä¢ **Finance/Budget Forms**: /sjsu.edu/libraryscoop/departments/operations-administrative-services/finance/purchasing
‚Ä¢ **Professional Development**: /sjsu.edu/libraryscoop/departments/operations-administrative-services/finance/professional-developmenttravel
‚Ä¢ **Facilities Forms**: /sjsu.edu/libraryscoop/departments/operations-administrative-services/facilities/facilities-forms

**How to Fill Out Forms:**
1. Navigate to the specific department page
2. Look for "Forms" or "Resources" sections
3. Download the form template
4. Contact the department lead if you need help

What specific form are you looking for? üìù`;

        // Site Navigation Help
        } else if (lowerMessage.includes('navigat') || lowerMessage.includes('find') || lowerMessage.includes('where') || lowerMessage.includes('page')) {
            response = `üó∫Ô∏è **LibScoop Navigation Guide**

**Most Popular Pages:**
1. **Home**: /sjsu.edu/libraryscoop/home (1,172 views)
2. **Forms & Policies**: /sjsu.edu/libraryscoop/forms-policies (297 views)
3. **Research & Scholarship**: /sjsu.edu/libraryscoop/departments/researchandscholarship (155 views)
4. **Meeting Rooms**: /sjsu.edu/libraryscoop/meeting-rooms (133 views)

**Quick Navigation Tips:**
‚Ä¢ Use the search function: /search/sjsu.edu/libraryscoop
‚Ä¢ Browse by departments: /sjsu.edu/libraryscoop/departments
‚Ä¢ Check committees: /sjsu.edu/libraryscoop/committees

**Can't find something?** Tell me what you're looking for and I'll guide you to the right page! üéØ`;

        // Department Information
        } else if (lowerMessage.includes('department') || lowerMessage.includes('division') || lowerMessage.includes('team')) {
            response = `üè¢ **Library Departments Overview**

**Main Departments Page**: /sjsu.edu/libraryscoop/departments (106 views)

**Top Departments by Usage:**
‚Ä¢ **Research & Scholarship** (155 views)
  üìç /sjsu.edu/libraryscoop/departments/researchandscholarship
  
‚Ä¢ **Operations & Administrative Services** (99 views)
  üìç /sjsu.edu/libraryscoop/departments/operations-administrative-services
  
‚Ä¢ **Marketing & Communications** (96 views)
  üìç /sjsu.edu/libraryscoop/departments/marcomm
  
‚Ä¢ **Innovations** (48 views)
  üìç /sjsu.edu/libraryscoop/departments/innovations
  
‚Ä¢ **Administration** (73 views)
  üìç /sjsu.edu/libraryscoop/departments/administration

**Sub-departments:**
‚Ä¢ Data Resources Management
‚Ä¢ User Experience (UX)
‚Ä¢ Digital Scholarship Services
‚Ä¢ Archives & Special Collections

Which department would you like to know more about? ü§î`;

        // HR Resources
        } else if (lowerMessage.includes('hr') || lowerMessage.includes('human resource') || lowerMessage.includes('vacation') || lowerMessage.includes('student assistant')) {
            response = `üë• **HR Resources & Procedures**

**Main HR Page**: /sjsu.edu/libraryscoop/departments/operations-administrative-services/human-resources (97 views)

**Popular HR Resources:**
‚Ä¢ **Student Assistants**: /sjsu.edu/libraryscoop/departments/operations-administrative-services/human-resources/student-assistants (88 views)
‚Ä¢ **Vacation Balances**: /sjsu.edu/libraryscoop/departments/operations-administrative-services/human-resources/vacation-balances (24 views)
‚Ä¢ **General HR Resources**: /sjsu.edu/libraryscoop/departments/operations-administrative-services/human-resources/general-hr-resources (19 views)
‚Ä¢ **Staff Resources**: /sjsu.edu/libraryscoop/departments/operations-administrative-services/human-resources/staff (7 views)

**Student Employee Information:**
‚Ä¢ Main Info: /sjsu.edu/libraryscoop/student-employee-info (57 views)
‚Ä¢ HR Knowledge: /sjsu.edu/libraryscoop/student-employee-info/hr-knowledge (25 views)
‚Ä¢ Building Knowledge: /sjsu.edu/libraryscoop/student-employee-info/building-knowledge (11 views)
‚Ä¢ Safety Knowledge: /sjsu.edu/libraryscoop/student-employee-info/safety-knowledge (9 views)

**Budget Information:**
‚Ä¢ Student Assistant Budget: /sjsu.edu/libraryscoop/departments/operations-administrative-services/finance/budget/student-assistant-budget (45 views)

Need help with a specific HR procedure? Let me know! üìã`;

        // Meeting Rooms
        } else if (lowerMessage.includes('meeting') || lowerMessage.includes('room') || lowerMessage.includes('book') || lowerMessage.includes('reserve')) {
            response = `üèõÔ∏è **Meeting Rooms Information**

**Meeting Rooms Page**: /sjsu.edu/libraryscoop/meeting-rooms (133 views)

**Popular Meeting-Related Pages:**
‚Ä¢ Team Tuesdays: /sjsu.edu/libraryscoop/departments/administration/team-tuesdays (21 views)
‚Ä¢ Administration Meetings: /sjsu.edu/libraryscoop/departments/administration/meetings (3 views)
‚Ä¢ General Meetings: /sjsu.edu/libraryscoop/meetings (5 views)

**How to Book Meeting Rooms:**
1. Check availability on the meeting rooms page
2. Follow the booking procedure outlined there
3. Contact facilities if you need technical setup
4. Confirm your booking via email

**Room Types Available:**
‚Ä¢ Conference rooms for large meetings
‚Ä¢ Small meeting spaces for team discussions
‚Ä¢ Presentation rooms with AV equipment

Need help booking a specific room? üìÖ`;

        // Professional Development
        } else if (lowerMessage.includes('professional development') || lowerMessage.includes('training') || lowerMessage.includes('travel')) {
            response = `üìö **Professional Development Resources**

**Main Professional Development**: /sjsu.edu/libraryscoop/professional-development (93 views)

**Travel & Development**: /sjsu.edu/libraryscoop/departments/operations-administrative-services/finance/professional-developmenttravel (68 views)

**Learning & Development Committee**: /sjsu.edu/libraryscoop/committees/library-learning-development (48 views)

**How to Request Professional Development:**
1. Visit the professional development page
2. Fill out the appropriate request form
3. Get supervisor approval
4. Submit to finance for budget approval
5. Book your training/conference

**Popular Development Areas:**
‚Ä¢ Library science conferences
‚Ä¢ Technology training
‚Ä¢ Leadership development  
‚Ä¢ Subject-specific workshops

Need help with a specific development request? üéì`;

        // Statistics & Analytics
        } else if (lowerMessage.includes('stat') || lowerMessage.includes('analytic') || lowerMessage.includes('data') || lowerMessage.includes('usage')) {
            response = `üìä **Statistics & Analytics Resources**

**Main Stats Page**: /sjsu.edu/libraryscoop/stats (50 views)

**Available Statistics:**
‚Ä¢ **Reference & Instruction**: /sjsu.edu/libraryscoop/stats/reference-instruction (20 views)
‚Ä¢ **Website & LibGuide Usage**: /sjsu.edu/libraryscoop/stats/website-libguide-usage (14 views)

**Data Resources Management**: /sjsu.edu/libraryscoop/departments/innovations/data-resources-mgt (43 views)

**Analytics Available:**
‚Ä¢ Website traffic and usage patterns
‚Ä¢ Library service statistics
‚Ä¢ Research support metrics
‚Ä¢ Collection usage data
‚Ä¢ Student engagement analytics

**How to Access Statistics:**
1. Navigate to the stats section
2. Choose your data category
3. Download reports or view dashboards
4. Contact Data Resources Management for custom reports

Need specific analytics data? Let me help you find it! üìà`;

        // Committees
        } else if (lowerMessage.includes('committee') || lowerMessage.includes('group') || lowerMessage.includes('working group')) {
            response = `ü§ù **Library Committees & Working Groups**

**Main Committees Page**: /sjsu.edu/libraryscoop/committees (47 views)

**Active Committees:**
‚Ä¢ **ARCWG** (Anti-Racism Assessment): /sjsu.edu/libraryscoop/committees/ARCWG (55 views)
‚Ä¢ **University Library Board**: /sjsu.edu/libraryscoop/committees/university-library-board (47 views)
‚Ä¢ **ULLT**: /sjsu.edu/libraryscoop/committees/ullt (41 views)
‚Ä¢ **Library Learning Development**: /sjsu.edu/libraryscoop/committees/library-learning-development (48 views)
‚Ä¢ **Data Dashboard Committee**: /sjsu.edu/libraryscoop/committees/data-dashboad-committee (22 views)

**Special Groups:**
‚Ä¢ **Library Staff Association**: /sjsu.edu/libraryscoop/committees/librarystaffassociation (6 views)
‚Ä¢ **DLUX** (Designing Library User Experience): /sjsu.edu/libraryscoop/committees/dlux (3 views)

**How to Join a Committee:**
1. Review committee descriptions and meeting schedules
2. Contact the committee chair
3. Attend a meeting as a guest first
4. Request formal membership

Which committee interests you? ü§î`;

        // Safety & Emergency
        } else if (lowerMessage.includes('safety') || lowerMessage.includes('emergency') || lowerMessage.includes('health')) {
            response = `üö® **Health, Safety & Emergency Information**

**Health & Safety Main**: /sjsu.edu/libraryscoop/departments/operations-administrative-services/health-safety (5 views)

**Emergency Preparedness**: /sjsu.edu/libraryscoop/departments/operations-administrative-services/health-safety/emergency-preparedness (5 views)

**Student Employee Safety**: /sjsu.edu/libraryscoop/student-employee-info/safety-knowledge (9 views)

**Key Safety Resources:**
‚Ä¢ Emergency evacuation procedures
‚Ä¢ Incident reporting forms
‚Ä¢ Safety training materials
‚Ä¢ Health and wellness resources
‚Ä¢ First aid station locations

**Emergency Contacts:**
‚Ä¢ Campus Police: [Emergency Number]
‚Ä¢ Facilities Emergency: [Contact Info]
‚Ä¢ Health Services: [Contact Info]

**In Case of Emergency:**
1. Call 911 for immediate danger
2. Contact campus security
3. Report to your supervisor
4. Fill out incident report
5. Follow up with HR if needed

Need specific safety information? üõ°Ô∏è`;

        // Default response
        } else {
            response = `ü§î I'd be happy to help you navigate the library's internal systems! 

**I can help you with:**
‚Ä¢ üìû Staff directory and contact information
‚Ä¢ üìã Forms and policies navigation
‚Ä¢ üó∫Ô∏è Finding specific pages on libscoop
‚Ä¢ üè¢ Department information and contacts
‚Ä¢ üë• HR resources and procedures
‚Ä¢ üìÖ Meeting room information
‚Ä¢ üìä Statistics and analytics
‚Ä¢ ü§ù Committee information
‚Ä¢ üö® Safety and emergency procedures

**Popular pages employees visit:**
‚Ä¢ Forms & Policies (297 views)
‚Ä¢ Research & Scholarship (155 views)  
‚Ä¢ Meeting Rooms (133 views)
‚Ä¢ Staff Directory (74 views)

Try asking something like:
‚Ä¢ "How do I find the HR forms?"
‚Ä¢ "Who do I contact for IT support?"
‚Ä¢ "Where is the meeting room booking page?"
‚Ä¢ "Show me the staff directory"

What specific information are you looking for? üòä`;
        }

        this.addMessage('bot', response);
    }

    addMessage(sender, text) {
        const messagesContainer = document.getElementById('mlk-employee-chat-messages');
        const messageDiv = document.createElement('div');
        messageDiv.className = `mlk-employee-message ${sender}`;
        messageDiv.innerHTML = text.replace(/\n/g, '<br>');
        
        messagesContainer.appendChild(messageDiv);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    showTyping() {
        this.isTyping = true;
        const messagesContainer = document.getElementById('mlk-employee-chat-messages');
        const typingDiv = document.createElement('div');
        typingDiv.className = 'mlk-employee-typing';
        typingDiv.id = 'mlk-employee-typing-indicator';
        typingDiv.innerHTML = `
            <div class="mlk-employee-typing-dot"></div>
            <div class="mlk-employee-typing-dot"></div>
            <div class="mlk-employee-typing-dot"></div>
        `;
        
        messagesContainer.appendChild(typingDiv);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    hideTyping() {
        this.isTyping = false;
        const typingIndicator = document.getElementById('mlk-employee-typing-indicator');
        if (typingIndicator) {
            typingIndicator.remove();
        }
    }
}

// Initialize the chatbot
const mlkEmployeeBot = new MLKEmployeeChatbot();
</script>